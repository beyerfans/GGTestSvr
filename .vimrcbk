if v:lang =~ "utf8$" || v:lang =~ "UTF-8$"
   set fileencodings=ucs-bom,utf-8,latin1
endif

set background=dark
colorscheme molokai

set nocompatible	" Use Vim defaults (much better!)
set bs=indent,eol,start		" allow backspacing over everything in insert mode
"set ai			" always set autoindenting on
"set backup		" keep a backup file
set viminfo='20,\"50	" read/write a .viminfo file, don't store more
			" than 50 lines of registers
set history=50		" keep 50 lines of command line history
set ruler		" show the cursor position all the time

" Only do this part when compiled with support for autocommands
if has("autocmd")
  augroup redhat
  autocmd!
  " In text files, always limit the width of text to 78 characters
  autocmd BufRead *.txt set tw=78
  " When editing a file, always jump to the last cursor position
  autocmd BufReadPost *
  \ if line("'\"") > 0 && line ("'\"") <= line("$") |
  \   exe "normal! g'\"" |
  \ endif
  " don't write swapfile on most commonly used directories for NFS mounts or USB sticks
  autocmd BufNewFile,BufReadPre /media/*,/mnt/* set directory=~/tmp,/var/tmp,/tmp
  " start with spec file template
  autocmd BufNewFile *.spec 0r /usr/share/vim/vimfiles/template.spec
  augroup END
endif

if has("cscope") && filereadable("/usr/bin/cscope")
   set csprg=/usr/bin/cscope
   set csto=0
   set cst
   set nocsverb
   " add any database in current directory
   if filereadable("cscope.out")
      cs add cscope.out
   " else add database pointed to by environment
   elseif $CSCOPE_DB != ""
      cs add $CSCOPE_DB
   endif
   set csverb
endif

" Switch syntax highlighting on, when the terminal has colors
" Also switch on highlighting the last used search pattern.
if &t_Co > 2 || has("gui_running")
  syntax on
  set hlsearch
endif

filetype plugin on

if &term=="xterm"
     set t_Co=8
     set t_Sb=[4%dm
     set t_Sf=[3%dm
endif

" Don't wake up system with blinking cursor:
" http://www.linuxpowertop.org/known.php
let &guicursor = &guicursor . ",a:blinkon0"

"  vundle ç¯å¢ƒè®¾ç½®
 filetype off
 set rtp+=~/.vim/bundle/Vundle.vim
 " vundle ç®¡ç†çš„æ’ä»¶åˆ—è¡¨å¿…é¡»ä½äº vundle#begin() å’Œ vundle#end() ä¹‹é—´
 call vundle#begin()
 Plugin 'VundleVim/Vundle.vim'
 Plugin 'altercation/vim-colors-solarized'
 Plugin 'tomasr/molokai'
 Plugin 'vim-scripts/phd'
 Plugin 'Lokaltog/vim-powerline'
 Plugin 'octol/vim-cpp-enhanced-highlight'
 Plugin 'nathanaelkane/vim-indent-guides'
 Plugin 'derekwyatt/vim-fswitch'
 Plugin 'kshenoy/vim-signature'
 " Plugin 'vim-scripts/BOOKMARKSâ€”Mark-and-Highlight-Full-Lines'
 Plugin 'majutsushi/tagbar'
 Plugin 'vim-scripts/indexer.tar.gz'
 Plugin 'vim-scripts/DfrankUtil'
 Plugin 'vim-scripts/vimprj'
 Plugin 'dyng/ctrlsf.vim'
 Plugin 'terryma/vim-multiple-cursors'
 Plugin 'scrooloose/nerdcommenter'
 Plugin 'vim-scripts/DrawIt'
 Plugin 'SirVer/ultisnips'
 Plugin 'Valloric/YouCompleteMe'
 Plugin 'derekwyatt/vim-protodef'
 Plugin 'scrooloose/nerdtree'
 Plugin 'fholgado/minibufexpl.vim'
 Plugin 'gcmt/wildfire.vim'
 Plugin 'sjl/gundo.vim'
 Plugin 'Lokaltog/vim-easymotion'
 Plugin 'suan/vim-instant-markdown'
 Plugin 'lilydjwg/fcitx.vim'
 " Plugin 'vim-cpp-enhanced-highlight'
 " æ’ä»¶åˆ—è¡¨ç»“æŸ
 call vundle#end()
 filetype plugin indent on

 " å®šä¹‰å¿«æ·é”®çš„å‰ç¼€ï¼Œå³<Leader>
 let mapleader=";"


" å°†å¤–éƒ¨å‘½ä»¤ wmctrl æ§åˆ¶çª—å£æœ€å¤§åŒ–çš„å‘½ä»¤è¡Œå‚æ•°å°è£…æˆä¸€ä¸ª vim çš„å‡½æ•°
 fun! ToggleFullscreen()
     call system("wmctrl -ir " . v:windowid . " -b toggle,fullscreen")
     endf
     " å…¨å±å¼€/å…³å¿«æ·é”®
     map <silent> <F11> :call ToggleFullscreen()<CR>
     " å¯åŠ¨ vim æ—¶è‡ªåŠ¨å…¨å±
     autocmd VimEnter * call ToggleFullscreen()


" æ€»æ˜¯æ˜¾ç¤ºçŠ¶æ€æ 
 set laststatus=2
 " æ˜¾ç¤ºå…‰æ ‡å½“å‰ä½ç½®
 set ruler
 " å¼€å¯è¡Œå·æ˜¾ç¤º
 set number
 " é«˜äº®æ˜¾ç¤ºå½“å‰è¡Œ/åˆ—
 set cursorline
 set cursorcolumn
 " é«˜äº®æ˜¾ç¤ºæœç´¢ç»“æœ
 set hlsearch    

syntax enable
syntax on

 "è‡ªé€‚åº”ä¸åŒè¯­è¨€çš„æ™ºèƒ½ç¼©è¿›
 filetype indent on
 " å°†åˆ¶è¡¨ç¬¦æ‰©å±•ä¸ºç©ºæ ¼
 set expandtab
 " è®¾ç½®ç¼–è¾‘æ—¶åˆ¶è¡¨ç¬¦å ç”¨ç©ºæ ¼æ•°
 set tabstop=4
 " è®¾ç½®æ ¼å¼åŒ–æ—¶åˆ¶è¡¨ç¬¦å ç”¨ç©ºæ ¼æ•°
 set shiftwidth=4
 " è®© vim æŠŠè¿ç»­æ•°é‡çš„ç©ºæ ¼è§†ä¸ºä¸€ä¸ªåˆ¶è¡¨ç¬¦
 set softtabstop=4

 "éš vim è‡ªå¯åŠ¨
 let g:indent_guides_enable_on_vim_startup=1
 " ä»ç¬¬äºŒå±‚å¼€å§‹å¯è§†åŒ–æ˜¾ç¤ºç¼©è¿›
 let g:indent_guides_start_level=2
 " è‰²å—å®½åº¦
 let g:indent_guides_guide_size=1
 " å¿«æ·é”® i å¼€/å…³ç¼©è¿›å¯è§†åŒ–
 :nmap <silent> <Leader>i <Plug>IndentGuidesToggle

 let g:indent_guides_auto_colors = 0
 autocmd VimEnter,Colorscheme * :hi IndentGuidesOdd  guibg=red   ctermbg=3
 autocmd VimEnter,Colorscheme * :hi IndentGuidesEven guibg=green ctermbg=4

" ä½¿ç”¨ NERDTree æ’ä»¶æŸ¥çœ‹å·¥ç¨‹æ–‡ä»¶ã€‚è®¾ç½®å¿«æ·é”®ï¼Œé€Ÿè®°ï¼šfile list
 nmap <Leader>fl :NERDTreeToggle<CR>
if v:lang =~ "utf8$" || v:lang =~ "UTF-8$"
   set fileencodings=ucs-bom,utf-8,latin1
endif

set nocompatible	" Use Vim defaults (much better!)
set bs=indent,eol,start		" allow backspacing over everything in insert mode
"set ai			" always set autoindenting on
"set backup		" keep a backup file
set viminfo='20,\"50	" read/write a .viminfo file, don't store more
			" than 50 lines of registers
set history=50		" keep 50 lines of command line history
set ruler		" show the cursor position all the time

" Only do this part when compiled with support for autocommands
if has("autocmd")
  augroup redhat
  autocmd!
  " In text files, always limit the width of text to 78 characters
  autocmd BufRead *.txt set tw=78
  " When editing a file, always jump to the last cursor position
  autocmd BufReadPost *
  \ if line("'\"") > 0 && line ("'\"") <= line("$") |
  \   exe "normal! g'\"" |
  \ endif
  " don't write swapfile on most commonly used directories for NFS mounts or USB sticks
  autocmd BufNewFile,BufReadPre /media/*,/mnt/* set directory=~/tmp,/var/tmp,/tmp
  " start with spec file template
  autocmd BufNewFile *.spec 0r /usr/share/vim/vimfiles/template.spec
  augroup END
endif

if has("cscope") && filereadable("/usr/bin/cscope")
   set csprg=/usr/bin/cscope
   set csto=0
   set cst
   set nocsverb
   " add any database in current directory
   if filereadable("cscope.out")
      cs add cscope.out
   " else add database pointed to by environment
   elseif $CSCOPE_DB != ""
      cs add $CSCOPE_DB
   endif
   set csverb
endif

" Switch syntax highlighting on, when the terminal has colors
" Also switch on highlighting the last used search pattern.
if &t_Co > 2 || has("gui_running")
  syntax on
  set hlsearch
endif

filetype plugin on

if &term=="xterm"
     set t_Co=8
     set t_Sb=[4%dm
     set t_Sf=[3%dm
endif

" Don't wake up system with blinking cursor:
" http://www.linuxpowertop.org/known.php
let &guicursor = &guicursor . ",a:blinkon0"

" å¼€å¯æ–‡ä»¶ç±»å‹ä¾¦æµ‹
 filetype on
" " æ ¹æ®ä¾¦æµ‹åˆ°çš„ä¸åŒç±»å‹åŠ è½½å¯¹åº”çš„æ’ä»¶
 filetype plugin on

 " å®šä¹‰å¿«æ·é”®åˆ°è¡Œé¦–å’Œè¡Œå°¾
  nmap LB 0
  nmap LE $
  " è®¾ç½®å¿«æ·é”®å°†é€‰ä¸­æ–‡æœ¬å—å¤åˆ¶è‡³ç³»ç»Ÿå‰ªè´´æ¿
  vnoremap <Leader>y "+y
  " è®¾ç½®å¿«æ·é”®å°†ç³»ç»Ÿå‰ªè´´æ¿å†…å®¹ç²˜è´´è‡³ vim
  nmap <Leader>p "+p
  " å®šä¹‰å¿«æ·é”®å…³é—­å½“å‰åˆ†å‰²çª—å£
  nmap <Leader>q :q<CR>
  " å®šä¹‰å¿«æ·é”®ä¿å­˜å½“å‰çª—å£å†…å®¹
  nmap <Leader>w :w<CR>
  " å®šä¹‰å¿«æ·é”®ä¿å­˜æ‰€æœ‰çª—å£å†…å®¹å¹¶é€€å‡º vim
  nmap <Leader>WQ :wa<CR>:q<CR>
  " ä¸åšä»»ä½•ä¿å­˜ï¼Œç›´æ¥é€€å‡º vim
  nmap <Leader>Q :qa!<CR>
  " ä¾æ¬¡éå†å­çª—å£
  nnoremap nw <C-W><C-W>
  " è·³è½¬è‡³å³æ–¹çš„çª—å£
  nnoremap <Leader>lw <C-W>l
  " è·³è½¬è‡³å·¦æ–¹çš„çª—å£
  nnoremap <Leader>hw <C-W>h
  " è·³è½¬è‡³ä¸Šæ–¹çš„å­çª—å£
  nnoremap <Leader>kw <C-W>k
  " è·³è½¬è‡³ä¸‹æ–¹çš„å­çª—å£
  nnoremap <Leader>jw <C-W>j
  " å®šä¹‰å¿«æ·é”®åœ¨ç»“å¯¹ç¬¦ä¹‹é—´è·³è½¬
  nmap <Leader>M %

  autocmd BufWritePost $MYVIMRC source $MYVIMRC

  " å¼€å¯å®æ—¶æœç´¢åŠŸèƒ½
   set incsearch
   " æœç´¢æ—¶å¤§å°å†™ä¸æ•æ„Ÿ
   set ignorecase
   " å…³é—­å…¼å®¹æ¨¡å¼
   set nocompatible
   " vim è‡ªèº«å‘½ä»¤è¡Œæ¨¡å¼æ™ºèƒ½è¡¥å…¨
   set wildmenu

"  vundle ç¯å¢ƒè®¾ç½®
 filetype off
 set rtp+=~/.vim/bundle/Vundle.vim
 " vundle ç®¡ç†çš„æ’ä»¶åˆ—è¡¨å¿…é¡»ä½äº vundle#begin() å’Œ vundle#end() ä¹‹é—´
 call vundle#begin()
 Plugin 'VundleVim/Vundle.vim'
 Plugin 'altercation/vim-colors-solarized'
 Plugin 'tomasr/molokai'
 Plugin 'vim-scripts/phd'
 Plugin 'Lokaltog/vim-powerline'
 Plugin 'octol/vim-cpp-enhanced-highlight'
 Plugin 'nathanaelkane/vim-indent-guides'
 Plugin 'derekwyatt/vim-fswitch'
 Plugin 'kshenoy/vim-signature'
 " Plugin 'vim-scripts/BOOKMARKSâ€”Mark-and-Highlight-Full-Lines'
 Plugin 'majutsushi/tagbar'
 Plugin 'vim-scripts/indexer.tar.gz'
 Plugin 'vim-scripts/DfrankUtil'
 Plugin 'vim-scripts/vimprj'
 Plugin 'dyng/ctrlsf.vim'
 Plugin 'terryma/vim-multiple-cursors'
 Plugin 'scrooloose/nerdcommenter'
 Plugin 'vim-scripts/DrawIt'
 Plugin 'SirVer/ultisnips'
 Plugin 'Valloric/YouCompleteMe'
 Plugin 'derekwyatt/vim-protodef'
 Plugin 'scrooloose/nerdtree'
 Plugin 'fholgado/minibufexpl.vim'
 Plugin 'gcmt/wildfire.vim'
 Plugin 'sjl/gundo.vim'
 Plugin 'Lokaltog/vim-easymotion'
 Plugin 'suan/vim-instant-markdown'
 Plugin 'lilydjwg/fcitx.vim'
 " Plugin 'vim-cpp-enhanced-highlight'
 " æ’ä»¶åˆ—è¡¨ç»“æŸ
 call vundle#end()
 filetype plugin indent on

set background=dark
colorscheme molokai


 " ç¦æ­¢å…‰æ ‡é—ªçƒ
  set gcr=a:block-blinkon0
  " ç¦æ­¢æ˜¾ç¤ºæ»šåŠ¨æ¡
  set guioptions-=l
  set guioptions-=L
  set guioptions-=r
  set guioptions-=R
  " ç¦æ­¢æ˜¾ç¤ºèœå•å’Œå·¥å…·æ¡
  set guioptions-=m
  set guioptions-=T

" å°†å¤–éƒ¨å‘½ä»¤ wmctrl æ§åˆ¶çª—å£æœ€å¤§åŒ–çš„å‘½ä»¤è¡Œå‚æ•°å°è£…æˆä¸€ä¸ª vim çš„å‡½æ•°
 fun! ToggleFullscreen()
     call system("wmctrl -ir " . v:windowid . " -b toggle,fullscreen")
     endf
     " å…¨å±å¼€/å…³å¿«æ·é”®
     map <silent> <F11> :call ToggleFullscreen()<CR>
     " å¯åŠ¨ vim æ—¶è‡ªåŠ¨å…¨å±
     autocmd VimEnter * call ToggleFullscreen()

 " è®¾ç½® gvim æ˜¾ç¤ºå­—ä½“
set guifont=YaHei\ Consolas\ Hybrid\ 11.5 

" æ€»æ˜¯æ˜¾ç¤ºçŠ¶æ€æ 
 set laststatus=2
 " æ˜¾ç¤ºå…‰æ ‡å½“å‰ä½ç½®
 set ruler
 " å¼€å¯è¡Œå·æ˜¾ç¤º
 set number
 " é«˜äº®æ˜¾ç¤ºå½“å‰è¡Œ/åˆ—
 set cursorline
 set cursorcolumn
 " é«˜äº®æ˜¾ç¤ºæœç´¢ç»“æœ
 set hlsearch    

 set nowrap

"Powerline settings begin

let g:Powerline_symbols = 'fancy'
let g:Powerline_colorscheme='solarized256'
set t_Co=256
"python from powerline.vim import setup as powerline_setup
"python powerline_setup()
"python del powerline_setup

if system('command -v powerline-daemon') != ''
        python3 from powerline.vim import setup as powerline_setup
            python3 powerline_setup()
                python3 del powerline_setup
                    set laststatus=2
                        set noshowmode
                    endif

"Powerline settings end                    

"indexer settings begin
" è®¾ç½®æ’ä»¶ indexer è°ƒç”¨ ctags çš„å‚æ•°
 " é»˜è®¤ --c++-kinds=+p+lï¼Œé‡æ–°è®¾ç½®ä¸º --c++-kinds=+p+l+x+c+d+e+f+g+m+n+s+t+u+v
 " é»˜è®¤ --fields=+iaS ä¸æ»¡è¶³ YCM è¦æ±‚ï¼Œéœ€æ”¹ä¸º --fields=+iaSl
 let g:indexer_ctagsCommandLineOptions="--c++-kinds=+p+l+x+c+d+e+f+g+m+n+s+t+u+v --fields=+iaSl --extra=+q"
"  indexer settings end
syntax enable
syntax on

 "è‡ªé€‚åº”ä¸åŒè¯­è¨€çš„æ™ºèƒ½ç¼©è¿›
 filetype indent on
 " å°†åˆ¶è¡¨ç¬¦æ‰©å±•ä¸ºç©ºæ ¼
 set expandtab
 " è®¾ç½®ç¼–è¾‘æ—¶åˆ¶è¡¨ç¬¦å ç”¨ç©ºæ ¼æ•°
 set tabstop=4
 " è®¾ç½®æ ¼å¼åŒ–æ—¶åˆ¶è¡¨ç¬¦å ç”¨ç©ºæ ¼æ•°
 set shiftwidth=4
 " è®© vim æŠŠè¿ç»­æ•°é‡çš„ç©ºæ ¼è§†ä¸ºä¸€ä¸ªåˆ¶è¡¨ç¬¦
 set softtabstop=4

 "éš vim è‡ªå¯åŠ¨
 let g:indent_guides_enable_on_vim_startup=1
 " ä»ç¬¬äºŒå±‚å¼€å§‹å¯è§†åŒ–æ˜¾ç¤ºç¼©è¿›
 let g:indent_guides_start_level=2
 " è‰²å—å®½åº¦
 let g:indent_guides_guide_size=1
 " å¿«æ·é”® i å¼€/å…³ç¼©è¿›å¯è§†åŒ–
 :nmap <silent> <Leader>i <Plug>IndentGuidesToggle

nmap <silent> <Leader>sw :FSHere<cr>

" è®¾ç½® tagbar å­çª—å£çš„ä½ç½®å‡ºç°åœ¨ä¸»ç¼–è¾‘åŒºçš„å·¦è¾¹ 
 let tagbar_left=1 
 " è®¾ç½®æ˜¾ç¤ºï¼éšè—æ ‡ç­¾åˆ—è¡¨å­çª—å£çš„å¿«æ·é”®ã€‚é€Ÿè®°ï¼šidentifier list by tag
 nnoremap <Leader>ilt :TagbarToggle<CR> 
 " è®¾ç½®æ ‡ç­¾å­çª—å£çš„å®½åº¦ 
 let tagbar_width=32 
 " tagbar å­çª—å£ä¸­ä¸æ˜¾ç¤ºå†—ä½™å¸®åŠ©ä¿¡æ¯ 
 let g:tagbar_compact=1
 " è®¾ç½® ctags å¯¹å“ªäº›ä»£ç æ ‡è¯†ç¬¦ç”Ÿæˆæ ‡ç­¾
let g:tagbar_type_cpp = {
    \ 'kinds' : [
         \ 'c:classes:0:1',
         \ 'd:macros:0:1',
         \ 'e:enumerators:0:0', 
         \ 'f:functions:0:1',
         \ 'g:enumeration:0:1',
         \ 'l:local:0:1',
         \ 'm:members:0:1',
         \ 'n:namespaces:0:1',
         \ 'p:functions_prototypes:0:1',
         \ 's:structs:0:1',
         \ 't:typedefs:0:1',
         \ 'u:unions:0:1',
         \ 'v:global:0:1',
         \ 'x:external:0:1'
     \ ],
     \ 'sro'        : '::',
     \ 'kind2scope' : {
         \ 'g' : 'enum',
         \ 'n' : 'namespace',
         \ 'c' : 'class',
         \ 's' : 'struct',
         \ 'u' : 'union'
     \ },
     \ 'scope2kind' : {
         \ 'enum'      : 'g',
         \ 'namespace' : 'n',
         \ 'class'     : 'c',
         \ 'struct'    : 's',
         \ 'union'     : 'u'
     \ }
     \ }


 let g:indent_guides_auto_colors = 0
 autocmd VimEnter,Colorscheme * :hi IndentGuidesOdd  guibg=red   ctermbg=3
 autocmd VimEnter,Colorscheme * :hi IndentGuidesEven guibg=green ctermbg=4

" ä½¿ç”¨ NERDTree æ’ä»¶æŸ¥çœ‹å·¥ç¨‹æ–‡ä»¶ã€‚è®¾ç½®å¿«æ·é”®ï¼Œé€Ÿè®°ï¼šfile list
 nmap <Leader>fl :NERDTreeToggle<CR>
 " è®¾ç½®NERDTreeå­çª—å£å®½åº¦
 let NERDTreeWinSize=32
 " è®¾ç½®NERDTreeå­çª—å£ä½ç½®
 let NERDTreeWinPos="right"
 " æ˜¾ç¤ºéšè—æ–‡ä»¶
 let NERDTreeShowHidden=1
 " NERDTree å­çª—å£ä¸­ä¸æ˜¾ç¤ºå†—ä½™å¸®åŠ©ä¿¡æ¯
 let NERDTreeMinimalUI=1
 " åˆ é™¤æ–‡ä»¶æ—¶è‡ªåŠ¨åˆ é™¤æ–‡ä»¶å¯¹åº” buffer
 let NERDTreeAutoDeleteBuffer=1

 " è®¾ç½®NERDTreeå­çª—å£å®½åº¦
 let NERDTreeWinSize=32
 " è®¾ç½®NERDTreeå­çª—å£ä½ç½®
 let NERDTreeWinPos="right"
 " æ˜¾ç¤ºéšè—æ–‡ä»¶
 let NERDTreeShowHidden=1
 " NERDTree å­çª—å£ä¸­ä¸æ˜¾ç¤ºå†—ä½™å¸®åŠ©ä¿¡æ¯
 let NERDTreeMinimalUI=1
 " åˆ é™¤æ–‡ä»¶æ—¶è‡ªåŠ¨åˆ é™¤æ–‡ä»¶å¯¹åº” buffer
 let NERDTreeAutoDeleteBuffer=1

 " åŸºäºç¼©è¿›æˆ–è¯­æ³•è¿›è¡Œä»£ç æŠ˜å 
 "set foldmethod=indent
 set foldmethod=syntax
 " å¯åŠ¨ vim æ—¶å…³é—­æŠ˜å ä»£ç 
 set nofoldenable

 nnoremap <leader>jc :YcmCompleter GoToDeclaration<CR>
 " åªèƒ½æ˜¯ #include æˆ–å·²æ‰“å¼€çš„æ–‡ä»¶
 nnoremap <leader>jd :YcmCompleter GoToDefinition<CR>

 
